app.controller("myCntrl", function ($scope, myService, constructionService, toastr) {
    'use strict'

    $scope.currentPage = 1, $scope.numPerPage = 10;

    init()
    function init() {
        $scope.$watch('CurrPageDataConstruction + NumDataConstructionPerPage', function () {
            constructionService.getAllConstructions(0, -1, 0, 0, 0, 0, -1, true, -1, '', $scope.currentPage, $scope.numPerPage).then(function (items) {
                $scope.DataConstruction = items.data.ListData;
                $scope.DataConstruction.forEach(function (e) {
                    myService.getSingleDistrict(e.DistrictId).then(function (item) {
                        e.DistrictName = item.data.DistrictName;
                    })
                    myService.getSingleCommune(e.CommuneId).then(function (item) {
                        e.CommuneName = item.data.CommuneName;
                    })
                })
                $scope.TotalItem = items.data.TotalCount;
            });
        }, function () {
            toastr.error('Error in getting records', 'Error');
        });
    }
});