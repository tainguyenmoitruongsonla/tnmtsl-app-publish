@using WaterResource.Service;
@{
    ViewBag.Title = "Thông tin công trình khai thác, sử dụng tài nguyên nước";
    UserRightService _service = new UserRightService();
    string user = User.Identity.Name;
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@if (_service.IsViewAction("/cong-trinh", User.Identity.Name, "VIEW"))
{
    <style>
        .leaflet-popup-content {
            overflow-y: auto;
        }
    </style>
    <link href="~/Assets/leaflet/leaflet.css" rel="stylesheet" />
    <script src="~/Assets/leaflet/leaflet.js"></script>
    <script src="~/Assets/leaflet/L.KML.js"></script>
    <!-- Load Esri Leaflet from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/esri-leaflet/2.0.4/esri-leaflet.js"></script>

    <!-- Load Esri Leaflet Vector from CDN -->
    <script src="https://unpkg.com/esri-leaflet-vector@3.1.3/dist/esri-leaflet-vector.js" crossorigin=""></script>
    <script src="~/Assets/leaflet/leaflet-bing-layer.js"></script>
    <script src="~/Assets/leaflet/Bing.js"></script>

    <!-- Load Leaflet Draw -->
    <script src="~/Assets/leaflet.draw/Leaflet.draw.js"></script>
    <script src="~/Assets/leaflet.draw/Leaflet.Draw.Event.js"></script>
    <link rel="stylesheet" href="~/Assets/leaflet.draw/leaflet.draw.css"/>

    <script src="~/Assets/leaflet.draw/Toolbar.js"></script>
    <script src="~/Assets/leaflet.draw/Tooltip.js"></script>

    <script src="~/Assets/leaflet.draw/ext/GeometryUtil.js"></script>
    <script src="~/Assets/leaflet.draw/ext/LatLngUtil.js"></script>
    <script src="~/Assets/leaflet.draw/ext/LineUtil.Intersect.js"></script>
    <script src="~/Assets/leaflet.draw/ext/Polygon.Intersect.js"></script>
    <script src="~/Assets/leaflet.draw/ext/Polyline.Intersect.js"></script>
    <script src="~/Assets/leaflet.draw/ext/TouchEvents.js"></script>

    <script src="~/Assets/leaflet.draw/draw/DrawToolbar.js"></script>
    <script src="~/Assets/leaflet.draw/draw/handler/Draw.Feature.js"></script>
    <script src="~/Assets/leaflet.draw/draw/handler/Draw.SimpleShape.js"></script>
    <script src="~/Assets/leaflet.draw/draw/handler/Draw.Polyline.js"></script>
    <script src="~/Assets/leaflet.draw/draw/handler/Draw.Marker.js"></script>
    <script src="~/Assets/leaflet.draw/draw/handler/Draw.Circle.js"></script>
    <script src="~/Assets/leaflet.draw/draw/handler/Draw.CircleMarker.js"></script>
    <script src="~/Assets/leaflet.draw/draw/handler/Draw.Polygon.js"></script>
    <script src="~/Assets/leaflet.draw/draw/handler/Draw.Rectangle.js"></script>


    <script src="~/Assets/leaflet.draw/edit/EditToolbar.js"></script>
    <script src="~/Assets/leaflet.draw/edit/handler/EditToolbar.Edit.js"></script>
    <script src="~/Assets/leaflet.draw/edit/handler/EditToolbar.Delete.js"></script>

    <script src="~/Assets/leaflet.draw/Control.Draw.js"></script>

    <script src="~/Assets/leaflet.draw/edit/handler/Edit.Poly.js"></script>
    <script src="~/Assets/leaflet.draw/edit/handler/Edit.SimpleShape.js"></script>
    <script src="~/Assets/leaflet.draw/edit/handler/Edit.Rectangle.js"></script>
    <script src="~/Assets/leaflet.draw/edit/handler/Edit.Marker.js"></script>
    <script src="~/Assets/leaflet.draw/edit/handler/Edit.CircleMarker.js"></script>
    <script src="~/Assets/leaflet.draw/edit/handler/Edit.Circle.js"></script>

    if (_service.IsInRole(user, "Default") || _service.IsInRole(user, "Construction") || _service.IsInRole(user, "Business"))
    {
        @Html.Partial("ForDefaultUser")
    }
    else
    {
        @Html.Partial("AllConsInMap")
    }
}
else
{
    @Html.Partial("_401")
}